<!-- Hello World in 6502 Assembly for the VIC-20 -->

<title>VIC-20 Hello World</title>

<body>
	<h1>Hello World in 6502 Assembly for the VIC-20</h1>
	<p>
	*** Assembled as .prg with 64tass ***
	<pre>
		<code>
;-------------------------------------------------------------------------------
; Hello World from scratch on VIC-20
;-------------------------------------------------------------------------------

; Structure
;	CONSTANTS
;	JMP MAIN
;	DATA
;	MAIN

;== CONSTANTS ==================================================================
PRINT_CHAR = $FFD2 ; kernel sR for outputing chars to screen
SCREEN_RAM = $1E00 ; screen ram start address

	* = $1001  ; necessary for putting prg into correct memory location

;== JUMP MAIN ==================================================================
	.BYTE $0D,$10,$0A,$00,$9E,$28,$34,$31,$31,$31,$29,$00
	; SYS 4111 - this byte sequence should launch prg (taken directly from
	;            the disassembled and WORKING metagalactic llamas code)
	BRK #$00   ; optional for debugging
	JMP MAIN

;== DATA =======================================================================
; Hello World + carr rtrn + cursor down + NUL term
DATA	.BYTE	$48,$45,$4C,$4C,$4F,$20,$57,$4F,$52,$4C,$44,$11,$0D,$00

;== MAIN =======================================================================
MAIN
	JSR CLR_SCREEN

	LDX #$00	; use X as offset
LOOP
	TXA
	PHA		; push X to stack
	LDA DATA, X	; loads A w/ char
	BEQ DONE	; If byte in A is zero, we're done string
	JSR PRINT_CHAR
	PLA
	TAX		; PUll X off stack
	INX		; increment X (offset into char data)
	JMP LOOP
DONE
	JMP DONE	; infinite loop to keep the message on the screen

CLR_SCREEN
	LDX #$00
CLR_LP
	LDA #$22                ; fills screen with blank chars
	STA SCREEN_RAM, X	; splits screen in half to use 8bit counter
	STA SCREEN_RAM + $0100, X
	DEX
	BNE CLR_LP
	RTS

	</code>
	</pre>
	</p>
</body>
